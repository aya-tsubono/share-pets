<%= render "shared/header" %>

<div class="chat-message">

 <%# サイドバー %>
  <div class="side-bar">
    <div class="side-bar-header">
      <div class="header-name">
        <%= link_to current_user.nickname, user_path(current_user.id) %> さんのルーム
      </div>
    </div>

    <div class="rooms">
      <% current_user.rooms.each do |room| %>
      <div class="room">
        <div class="room-name">
          <%= link_to @room.room_name, room_messages_path(room) %>
        </div>
      </div>
      <% end %>
    </div>
  </div>
  <%# //サイドバー %>

  <%# チャット画面 %>
  <div class="chat">
    <div class="chat-header">
      <div class="left-header">
        <div class="header-title">
          <%= @room.room_name %>
        </div>
        <div class="pet-link">
          <%= link_to "投稿ページを見る", pet_path(@pet.id) %>
        </div>
      </div>
      <div class="right-header">
        <div class="header-button">
          <% if user_signed_in? && (current_user.id == @pet.user_id) %>
            <%= link_to "里親決定", new_pet_adoption_path(@pet.id), class: "adopt-btn" %>
            <%= link_to "申請者のプロフィール", user_path(@user.ids), class: "prof-btn" %>
          <% end %>
          <% if user_signed_in? && (current_user.id != @pet.user_id) %>
            <%= link_to "投稿者のプロフィール", user_path(@pet.user_id), class: "prof-btn" %>
          <% end %>
        </div>
      </div>
    </div>

  <%# メッセージ %>
  <div class="messages">
    <%= render partial: 'message', collection: @messages %>
  </div>
  <%# //メッセージ %>

    <%= form_with model: [@room, @message], class: 'message-form', local: true do |f| %>
      <div class="form-input">
        <%= f.text_field :content, class: 'form-message', placeholder: 'メッセージを入力してください' %>
        <label class="form-image">
        <span class="image-file">画像</span>
        <%= f.file_field :image, class: 'hidden' %>
        </label>
      </div>
      <%= f.submit '送信', class: 'form-submit' %>
    <% end %>
  </div>
  <%# //チャット画面 %>

</div>